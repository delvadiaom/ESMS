"use strict";(self.webpackChunksidenav=self.webpackChunksidenav||[]).push([[465],{4465:(et,O,a)=>{a.r(O),a.d(O,{RolesModule:()=>tt});var g=a(6895),p=a(9299),f=a(6308),c=a(7155),t=a(4650),m=a(529);const P=[{label:"Employees",shortForm:"E",route:!1,nested:[["View",!0,"V"],["Add",!1,"S"],["Update",!1,"U"],["Delete",!1,"D"]]},{route:!1,shortForm:"D",label:"Departments / Teams",nested:[["View",!0,"V"],["Add",!1,"S"],["Update",!1,"U"],["Delete",!1,"D"]]},{label:"Reports",shortForm:"R",route:!1,nested:[["Download",!1,"W"]]},{label:"Activity Logs",shortForm:"L",route:!1,nested:[["View",!0,"V"]]}];let h=(()=>{class n{constructor(e){this._httpClient=e,this.token=sessionStorage.getItem("token")}getAllRoles(){return this._httpClient.get("http://192.168.102.92:8111/user/getPriviledgeDetails",{headers:new m.WM({token:this.token})})}addNewRole(e){return this._httpClient.post("http://192.168.102.92:8111/user/savePriviledgeDetails",e,{headers:new m.WM({token:this.token})})}getSingleRole(e){return this._httpClient.get(`http://192.168.102.92:8111/user/getPriviledgeDetailsById/${e}`,{headers:new m.WM({token:this.token})})}updateRoleDetails(e){return this._httpClient.put("http://192.168.102.92:8111/user/updatePriviledgeDetails",e,{headers:new m.WM({token:this.token})})}deleteRoleDetails(e){return console.log("api",e),this._httpClient.delete(`http://192.168.102.92:8111/user/deletePriviledgeDetails/${e}`,{headers:new m.WM({token:this.token})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(m.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=a(7009),u=a(4859),C=a(3162);function w(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1," Role Id. "),t.qZA())}function R(n,i){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.priviledgeId)}}function Z(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1," Role Name "),t.qZA())}function y(n,i){if(1&n&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.priviledgeName)}}function N(n,i){1&n&&(t.TgZ(0,"th",23),t._uU(1,"Action"),t.qZA())}const M=function(n){return{disabled:n}};function F(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",24)(1,"a",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,b=t.oxw(2);return t.KtG(b.editPermission(s.priviledgeId))}),t._UZ(2,"i",26),t.qZA(),t.TgZ(3,"a",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,b=t.oxw(2);return t.KtG(b.deleteRole(s.priviledgeId))}),t._UZ(4,"i",27),t.qZA()()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("disabled","ADMIN"===e.priviledgeName)("ngClass",t.VKq(4,M,"ADMIN"===e.priviledgeName)),t.xp6(2),t.Q6J("disabled","ADMIN"===e.priviledgeName)("ngClass",t.VKq(6,M,"ADMIN"===e.priviledgeName))}}function A(n,i){1&n&&t._UZ(0,"tr",28)}function T(n,i){1&n&&t._UZ(0,"tr",29)}function k(n,i){if(1&n&&(t.TgZ(0,"tr",30)(1,"td",31),t._uU(2),t.qZA()()),2&n){t.oxw();const e=t.MAs(5);t.xp6(2),t.hij(' No data matching the filter "',e.value,'" ')}}function S(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t._UZ(1,"hr"),t.TgZ(2,"div",5),t._UZ(3,"i",6),t.TgZ(4,"input",7,8),t.NdJ("keyup",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilter(r))}),t.qZA()(),t.TgZ(6,"div",9)(7,"table",10),t.ynx(8,11),t.YNc(9,w,2,0,"th",12),t.YNc(10,R,2,1,"td",13),t.BQk(),t.ynx(11,14),t.YNc(12,Z,2,0,"th",12),t.YNc(13,y,2,1,"td",13),t.BQk(),t.ynx(14,15),t.YNc(15,N,2,0,"th",16),t.YNc(16,F,5,8,"td",17),t.BQk(),t.YNc(17,A,1,0,"tr",18),t.YNc(18,T,1,0,"tr",19),t.YNc(19,k,3,1,"tr",20),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("dataSource",e.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns)}}function D(n,i){1&n&&t._UZ(0,"mat-progress-bar",32)}let U=(()=>{class n{constructor(e,o,r){this.roleService=e,this._snackBar=o,this.router=r,this.displayedColumns=["priviledgeId","priviledgeName","action"],this.isLoading=!0}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0,this._apiSubscription=this.roleService.getAllRoles().subscribe({next:e=>{this.dataSource=new c.by(e),this.dataSource.sort=this.sort},error:e=>{this.isLoading=!1,console.log(e),401!=e.status&&this.router.navigate(["something-went-wrong"])},complete:()=>{this.isLoading=!1,console.log("Success!!")}})}editPermission(e){this.router.navigate(["roles/edit/"+e])}deleteRole(e){this.isLoading=!0,window.confirm("Are you sure ? ")&&(this._deleteApiSubscription=this.roleService.deleteRoleDetails(e).subscribe({next:o=>{console.log("Delete Done"),this._snackBar.open("Can't delete some users have this role"===o.status?"Can't delete some users have this role!":"Role deleted Successfully!","Close",{duration:5e3,panelClass:["green-snackbar","login-snackbar"]})},error:o=>{this.isLoading=!1,console.log(o),401!=o.status&&this.router.navigate(["something-went-wrong"])},complete:()=>{this.isLoading=!1,this.loadData(),console.log("Success!!")}}))}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}ngOnDestroy(){this._apiSubscription&&this._apiSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h),t.Y36(v.ux),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-role-component"]],viewQuery:function(e,o){if(1&e&&t.Gf(f.YE,5),2&e){let r;t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:7,vars:3,consts:[[1,"header"],[1,"button-31",3,"routerLink"],["class","container",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"container"],[1,"input-box"],[1,"fa-solid","fa-magnifying-glass"],["type","text","placeholder","Search here...",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","","ngClass","table",3,"dataSource"],["matColumnDef","priviledgeId"],["mat-header-cell","","ngClass","table-header",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","priviledgeName"],["matColumnDef","action"],["class","actionHeader","mat-header-cell","","ngClass","table-header",4,"matHeaderCellDef"],["mat-cell","","ngClass","table-row",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","","ngClass","table-header"],["mat-cell",""],["mat-header-cell","","ngClass","table-header",1,"actionHeader"],["mat-cell","","ngClass","table-row"],["mat-raised-button","",3,"disabled","ngClass","click"],[1,"fa-solid","fa-pen",2,"color","#4b5db5"],[1,"fa-solid","fa-trash",2,"color","red"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4","align","center",1,"mat-cell","noMatchingData"],["mode","indeterminate"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"User Roles"),t.qZA(),t.TgZ(3,"button",1),t._uU(4,"Add Role"),t.qZA()(),t.YNc(5,S,20,3,"div",2),t.YNc(6,D,1,0,"mat-progress-bar",3)),2&e&&(t.xp6(3),t.Q6J("routerLink","add-role"),t.xp6(2),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading))},dependencies:[g.mk,g.O5,p.rH,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,f.YE,u.zs,C.pW],styles:["body[_ngcontent-%COMP%]{font-family:lato,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}h1[_ngcontent-%COMP%]{font-size:28px;margin:0;text-align:center}.container[_ngcontent-%COMP%]{max-width:100%;margin-left:auto;margin-right:auto;width:100%}.mat-elevation-z8[_ngcontent-%COMP%]{border-radius:5px;overflow:auto}.button-31[_ngcontent-%COMP%]{background-color:#4b5db5;border-radius:4px;border-style:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Farfetch Basis,Helvetica Neue,Arial,sans-serif;font-size:16px;font-weight:700;line-height:1;margin:0;max-width:200px;min-height:50px;min-width:10px;outline:none;overflow:hidden;padding:9px 20px 8px;position:relative;text-align:center;text-transform:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%}.button-31[_ngcontent-%COMP%]:hover{background-color:#27367f}table[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:15px;outline:none;font-size:16px;margin-bottom:20px;border:none;border-bottom:1.5px solid darkgray;background-color:#f4f7fa}th[_ngcontent-%COMP%]{background-color:#4b5db5!important;color:#fff!important;font-size:18px}td[_ngcontent-%COMP%]{font-size:18px;color:#000}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:none;border:none;box-shadow:none;color:#000!important;font-size:20px}td[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{cursor:not-allowed}td[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#707070!important;cursor:not-allowed}.actionHeader[_ngcontent-%COMP%]{text-align:center!important}.table-row[_ngcontent-%COMP%]{text-align:center}mat-paginator[_ngcontent-%COMP%]{padding-top:20px}.input-box[_ngcontent-%COMP%]{position:relative;height:60px;background:#fff;border-radius:8px;box-shadow:0 5px 10px #0000001a;margin-top:30px;margin-bottom:15px;width:100%;padding:10px}.input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:20px;top:50%;transform:translateY(-50%);font-size:20px;color:#707070}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;outline:none;font-size:18px;font-weight:400;border:none;padding:0 155px 0 65px;background-color:transparent}.input-box[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{right:20px;font-size:16px;font-weight:400;color:#fff;border:none;padding:12px 30px;border-radius:6px;background-color:#263238;cursor:pointer}.input-box[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active{transform:translateY(-50%) scale(.98)}@media screen and (max-width: 500px){.input-box[_ngcontent-%COMP%]{height:50px;margin:20px auto}.input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:12px;font-size:25px}.input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:0 112px 0 50px}.input-box[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{right:8px;font-size:10px;padding:8px 18px}}.button-custom[_ngcontent-%COMP%]{font-family:sans-serif;padding:10px 20px!important;background-color:#dfe2f0!important;border:none!important;font-size:16px!important;cursor:pointer;color:#000!important;border-radius:5px!important}.button-custom[_ngcontent-%COMP%]:hover{color:#dfe2f0!important;background-color:#4b5db5!important}.noMatchingData[_ngcontent-%COMP%]{padding-top:30px;color:red;font-size:20px}"]}),n})();var l=a(4006),_=a(455),d=a(3546),x=a(4850);function J(n,i){if(1&n&&(t.TgZ(0,"mat-slide-toggle",18)(1,"mat-card-subtitle",15),t._uU(2),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw().$implicit;t.Q6J("checked",e[1])("formControlName",o.shortForm+e[2]),t.xp6(2),t.Oqu(e[0])}}function E(n,i){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"mat-card-title",15),t._uU(4),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"mat-card-content",16),t.YNc(7,J,3,3,"mat-slide-toggle",17),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(4),t.Oqu(e.label),t.xp6(2),t.Q6J("formGroupName",e.shortForm),t.xp6(1),t.Q6J("ngForOf",e.nested)}}function z(n,i){if(1&n&&(t.TgZ(0,"mat-slide-toggle",20)(1,"mat-card-subtitle",17),t._uU(2),t.qZA()()),2&n){const e=i.$implicit,o=t.oxw().$implicit;t.Q6J("checked",e[1])("formControlName",o.shortForm+e[2]),t.xp6(2),t.Oqu(e[0])}}function Y(n,i){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"mat-card-title",17),t._uU(4),t.qZA()(),t._UZ(5,"mat-divider"),t.TgZ(6,"mat-card-content",18),t.YNc(7,z,3,3,"mat-slide-toggle",19),t.qZA()()()),2&n){const e=i.$implicit;t.xp6(4),t.Oqu(e.label),t.xp6(2),t.Q6J("formGroupName",e.shortForm),t.xp6(1),t.Q6J("ngForOf",e.nested)}}function j(n,i){if(1&n){const e=t.EpF();t._UZ(0,"hr"),t.TgZ(1,"mat-card",4)(2,"form",5),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editRoleSubmit())}),t.TgZ(3,"div",6)(4,"label",7),t._uU(5,"Role Name : "),t.qZA(),t._UZ(6,"input",8),t.qZA(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",9),t.YNc(9,Y,8,3,"div",10),t.qZA(),t.TgZ(10,"div",11)(11,"button",12),t._uU(12," Back "),t.qZA(),t.TgZ(13,"button",13),t._uU(14," Save "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.permissionForm),t.xp6(7),t.Q6J("ngForOf",e.permissions),t.xp6(2),t.Q6J("routerLink","/roles"),t.xp6(2),t.Q6J("disabled",e.isRoleEditProcessing)}}function I(n,i){1&n&&t._UZ(0,"mat-progress-bar",21)}const L=[{path:"",component:U},{path:"add-role",component:(()=>{class n{formControlGenerator(){let e={};return e.roleName=this.fb.control("",l.kI.required),this.permissions.forEach(o=>{let r={};o.nested.forEach(s=>{r[`${o.shortForm}${s[2]}`]=this.fb.control(s[1]?{value:s[1],disabled:!0}:{value:s[1],disabled:!1})}),e[`${o.shortForm}`]=this.fb.group(r)}),e}constructor(e,o,r){this.fb=e,this.roleService=o,this.router=r,this.isRoleCreationProcessing=!1,this.permissions=P}ngOnInit(){this.permissionForm=this.fb.group(this.formControlGenerator())}addNewRoleSubmit(){if(this.permissionForm.valid){this.isRoleCreationProcessing=!0;let e="";Object.keys(this.permissionForm.controls).forEach(o=>{"object"==typeof this.permissionForm.controls[o].value&&Object.keys(this.permissionForm.controls[o].controls).forEach(r=>{this.permissionForm.controls[o].controls[r].value&&(e+=r+"#")})}),console.log(e),this._apiSubscription=this.roleService.addNewRole({priviledgeName:this.permissionForm.controls.roleName.value.toUpperCase(),priviledge:e}).subscribe({next:o=>{console.log(o),this.isRoleCreationProcessing=!1,this.router.navigate(["roles"])},error:o=>{console.log(o),this.isRoleCreationProcessing=!1,401!=o.status&&this.router.navigate(["something-went-wrong"])},complete:()=>{console.log("Role Added")}})}else alert("Please fill form Properly")}ngOnDestroy(){this._apiSubscription&&this._apiSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(h),t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-role"]],decls:24,vars:5,consts:[[1,"header"],[3,"routerLink"],[1,"wrapper"],["ngNativeValidate","",1,"role-form",3,"formGroup","ngSubmit"],[1,"role-wrapper"],["for","roleName"],["formControlName","roleName","type","text","placeholder","Enter Role Name","id","roleName"],[1,"container"],["class","sub-container",4,"ngFor","ngForOf"],[1,"btn-grp"],["mat-button","",1,"cancel_button",3,"routerLink"],["mat-button","",1,"save_button",3,"disabled"],[1,"sub-container"],[1,"main"],[1,"permissionHeader"],[1,"space"],[1,"nest",3,"formGroupName"],["color","primary",3,"checked","formControlName",4,"ngFor","ngForOf"],["color","primary",3,"checked","formControlName"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1")(2,"ul")(3,"li")(4,"a",1),t._uU(5,"User Roles"),t.qZA()(),t.TgZ(6,"li")(7,"a"),t._uU(8," Add Role "),t.qZA()()()()(),t._UZ(9,"hr"),t.TgZ(10,"mat-card",2)(11,"form",3),t.NdJ("ngSubmit",function(){return o.addNewRoleSubmit()}),t.TgZ(12,"div",4)(13,"label",5),t._uU(14,"Role Name : "),t.qZA(),t._UZ(15,"input",6),t.qZA(),t._UZ(16,"mat-divider"),t.TgZ(17,"div",7),t.YNc(18,E,8,3,"div",8),t.qZA(),t.TgZ(19,"div",9)(20,"button",10),t._uU(21," Back "),t.qZA(),t.TgZ(22,"button",11),t._uU(23," Save "),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("routerLink","/roles"),t.xp6(7),t.Q6J("formGroup",o.permissionForm),t.xp6(7),t.Q6J("ngForOf",o.permissions),t.xp6(2),t.Q6J("routerLink","/roles"),t.xp6(2),t.Q6J("disabled",o.isRoleCreationProcessing))},dependencies:[g.sg,p.rH,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,u.lW,_.Rr,d.a8,d.dn,d.$j,d.n5,x.d],styles:['.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.container[_ngcontent-%COMP%]{margin-top:40px}h1[_ngcontent-%COMP%]{font-size:28px;margin:0;text-align:center}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;gap:10px}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"/";margin-left:10px}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:after{content:""}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4b5db5;text-decoration:none}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{cursor:not-allowed}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child   a[_ngcontent-%COMP%]{color:#707070}.card[_ngcontent-%COMP%]{max-width:400px;padding:10px}.role-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.role-form[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:8px 0;display:block}.wrapper[_ngcontent-%COMP%]{margin-top:30px;padding:40px}.main[_ngcontent-%COMP%]{margin-bottom:10px}.main[_ngcontent-%COMP%]   .permissionHeader[_ngcontent-%COMP%]{padding:0 auto!important}.nest[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:10px;justify-content:flex-start;gap:20%}.role-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin:0 18px 18px 0}.role-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;border-radius:4px;border:2px solid #27367f;border:2px solid #6C7383;cursor:pointer;outline:none;padding:10px;background:transparent;transition:.5s;width:40%}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{cursor:auto;background-color:#f5f7ff}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#27367f;color:#6c7383}.btn-grp[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-start;gap:10px;height:-moz-fit-content;height:fit-content;width:100%}.btn-grp[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:20px 30px}.btn-grp[_ngcontent-%COMP%]   .save_button[_ngcontent-%COMP%]{background-color:#27367f;color:#fff}.btn-grp[_ngcontent-%COMP%]   .save_button[_ngcontent-%COMP%]:hover{background-color:#5c6eca;color:#fff}.btn-grp[_ngcontent-%COMP%]   .save_button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#fff;border:1px solid #ccc;cursor:not-allowed}.btn-grp[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:20px;margin-left:18px}@media screen and (max-width: 820px){.role-wrapper[_ngcontent-%COMP%]{margin:auto auto 18px}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}']}),n})()},{path:"edit/:roleid",component:(()=>{class n{formControlGenerator(){let e={};return e.roleName=this.fb.control("",l.kI.required),this.permissions.forEach(o=>{let r={};o.nested.forEach(s=>{r[`${o.shortForm}${s[2]}`]=this.fb.control(s[1]?{value:s[1],disabled:!0}:{value:s[1],disabled:!1})}),e[`${o.shortForm}`]=this.fb.group(r)}),e}constructor(e,o,r,s){this.fb=e,this.roleService=o,this.router=r,this.activeRoute=s,this.isRoleEditProcessing=!1,this.permissions=P,this.curRoleDetails={priviledge:"",priviledgeName:""},this.permissionArr=[],this.isFormdataFetching=!1,this.permissionForm=this.fb.group(this.formControlGenerator()),this.roleid=0}loadData(){this.isFormdataFetching=!0,this._apiSubscription=this.roleService.getSingleRole(this.roleid).subscribe({next:e=>{this.curRoleDetails=e,this.permissionArr=this.curRoleDetails.priviledge.split("#"),this.permissionForm.controls.roleName.setValue(this.curRoleDetails.priviledgeName);let o=[];this.permissionArr.forEach(r=>{r&&(o[r]=!0,this.permissionForm.controls[r[0]].controls[r]?.setValue(!0))})},error:e=>{console.log(e),401!=e.status&&this.router.navigate(["something-went-wrong"])},complete:()=>{this.isFormdataFetching=!1,console.log("Success!!")}})}getParams(){this._paramsSubscription=this.activeRoute.params.subscribe(e=>{this.roleid=e.roleid})}editRoleSubmit(){this.isRoleEditProcessing=!0;let e="";Object.keys(this.permissionForm.controls).forEach(o=>{"object"==typeof this.permissionForm.controls[o].value&&Object.keys(this.permissionForm.controls[o].controls).forEach(r=>{this.permissionForm.controls[o].controls[r].value&&(e+=r+"#")})}),this._apiSubscription=this.roleService.updateRoleDetails({priviledgeName:this.permissionForm.controls.roleName.value.toUpperCase(),priviledgeId:this.roleid,priviledge:e}).subscribe({next:o=>{console.log(o),this.isRoleEditProcessing=!1,this.router.navigate(["roles"])},error:o=>{console.log(o),this.isRoleEditProcessing=!1,401!=o.status&&this.router.navigate(["something-went-wrong"])},complete:()=>{console.log("Role Updated")}})}ngOnInit(){this.getParams(),this.loadData()}ngOnDestroy(){this._apiSubscription&&this._apiSubscription.unsubscribe(),this._paramsSubscription&&this._paramsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(h),t.Y36(p.F0),t.Y36(p.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-role"]],decls:11,vars:4,consts:[[1,"header"],[3,"routerLink"],[3,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"wrapper"],["ngNativeValidate","",1,"role-form",3,"formGroup","ngSubmit"],[1,"role-wrapper"],["for","roleName"],["formControlName","roleName","type","text","placeholder","Enter Role Name","id","roleName"],[1,"container"],["class","sub-container",4,"ngFor","ngForOf"],[1,"btn-grp"],["mat-button","",1,"cancel_button",3,"routerLink"],["mat-button","",1,"save_button",3,"disabled"],[1,"sub-container"],[1,"main"],[1,"permissionHeader"],[1,"space"],[1,"nest",3,"formGroupName"],["color","primary",3,"checked","formControlName",4,"ngFor","ngForOf"],["color","primary",3,"checked","formControlName"],["mode","indeterminate"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1")(2,"ul")(3,"li")(4,"a",1),t._uU(5,"User Roles"),t.qZA()(),t.TgZ(6,"li")(7,"a"),t._uU(8),t.qZA()()()()(),t.YNc(9,j,15,4,"ng-template",2),t.YNc(10,I,1,0,"mat-progress-bar",3)),2&e&&(t.xp6(4),t.Q6J("routerLink","/roles"),t.xp6(4),t.Oqu(o.roleid),t.xp6(1),t.Q6J("ngIf",!o.isFormdataFetching),t.xp6(1),t.Q6J("ngIf",o.isFormdataFetching))},dependencies:[g.sg,g.O5,p.rH,l.Fj,l.JJ,l.JL,l.sg,l.u,l.x0,u.lW,_.Rr,d.a8,d.dn,d.$j,d.n5,x.d,C.pW],styles:['.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.container[_ngcontent-%COMP%]{margin-top:40px}h1[_ngcontent-%COMP%]{font-size:28px;margin:0;text-align:center}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;gap:10px}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"/";margin-left:10px}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:after{content:""}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4b5db5;text-decoration:none}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{cursor:not-allowed}h1[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child   a[_ngcontent-%COMP%]{color:#707070}.card[_ngcontent-%COMP%]{max-width:400px;padding:10px}.role-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.role-form[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin:8px 0;display:block}.wrapper[_ngcontent-%COMP%]{margin-top:30px;padding:40px}.main[_ngcontent-%COMP%]{margin-bottom:10px}.main[_ngcontent-%COMP%]   .permissionHeader[_ngcontent-%COMP%]{padding:0 auto!important}.nest[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:10px;justify-content:flex-start;gap:20%}.role-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:10px;margin:0 18px 18px 0}.role-wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;border-radius:4px;border:2px solid #27367f;border:2px solid #6C7383;cursor:pointer;outline:none;padding:10px;background:transparent;transition:.5s;width:40%}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{cursor:auto;background-color:#f5f7ff}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#27367f;color:#6c7383}.btn-grp[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-start;gap:10px;height:-moz-fit-content;height:fit-content;width:100%}.btn-grp[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:20px 30px}.btn-grp[_ngcontent-%COMP%]   .save_button[_ngcontent-%COMP%]{background-color:#27367f;color:#fff}.btn-grp[_ngcontent-%COMP%]   .save_button[_ngcontent-%COMP%]:hover{background-color:#5c6eca;color:#fff}.btn-grp[_ngcontent-%COMP%]   .save_button[_ngcontent-%COMP%]:disabled{background-color:#ccc;color:#fff;border:1px solid #ccc;cursor:not-allowed}.btn-grp[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:20px;margin-left:18px}@media screen and (max-width: 820px){.role-wrapper[_ngcontent-%COMP%]{margin:auto auto 18px}.role-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}']}),n})()}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(L),p.Bz]}),n})();var q=a(9798),G=a(7392),H=a(3189),B=a(3805),W=a(5412),V=a(266),X=a(7084),K=a(1572);let tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,$,l.UX,c.p0,q.TU,f.JX,G.Ps,u.ot,H.h,_.rP,d.QW,x.t,C.Cv,B.Bb,W.Is,V.AV,X.To,K.Cq]}),n})()}}]);